
<html>

<head>
    <meta charset="UTF-8">
    <title>완벽한 자취생활, 완자</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="shortcut icon" href="../../assets/img/wanza-Icon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../assets/bootstrap/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" type="text/css" href="../../css/style.css">
    <link rel="stylesheet" type="text/css" href="../../css/question.css">
    <link rel="stylesheet" type="text/css" href="../../css/question-detail.css">
    <link rel="stylesheet" type="text/css" href="../../css/question-comment.css">
    

    <style>
        .questions-item-link:hover {
          text-decoration: none;
          
        }
        .questions-item-link:hover .questions-block{
          text-decoration: underline black;
        }
    
        .button {
          border: none;
          color: white;
          padding: 16px 32px;

          text-align: center;
          text-decoration: none;
          display: inline-block;
          font-size: 16px;
          margin: 4px 2px;
          transition-duration: 0.4s;
          cursor: pointer;
          border-radius: 15px;
        }

        .share-button {
          border-color: #fafafa;
          background-color: #fafafa; 
          width: 270px;
          height: 40px;
          border-radius: 15px;
          border: 0;
        }

        .share-button:hover {
          background-color: coral; 
          color: white; 
        }

        .q-button {
          background-color: #fafafa; 
          color: coral; 
          width: 270px;
          height: 40px;
          border-radius: 15px;
          border: 0;
        }

        .q-button:hover{
          background-color: coral; 
          color: white; 
        }

        .reply-photo{
          background-color: transparent !important;
          background-image: none !important;
          border-color: transparent;
          border: none;
          color: #FFFFFF;
        }

        .reply-submit{
          background-color: transparent !important;
          background-image: none !important;
          border-color: transparent;
          border: none;
          color: coral;
          font-size: 16px;
          font-weight: 600;
        }

    
        .question-btn1 {
          background-color: rgba(254, 254, 254, 1); 
          color: black; 
          border: 2px solid coral;
        }
    
        .question-btn1:hover {
          background-color: coral;
          color: white;
        }
    
        .question-btn2 {
          background-color: white; 
          color: black; 
          border: 2px solid powderblue;
        }
    
        .question-btn2:hover {
          background-color: powderblue;
          color: white;
        }
    
        .w3-button{
          border-radius: 15px;

        }
    
        .w3-dropdown-click{
          background-color: coral;
          border-radius: 15px;
          color: white;
        }
    
        #body,#body p ,#body b, #body h1, #body h2, #body h3, #body h4, #body h5,#body h6, #body li{
          font-family: 'Nanum Gothic', sans-serif;
          font-weight: 500;
            /* font-weight: bold; */
        }
        #nav li, #footer h3, #footer p, #footer li{font-family: 'Noto Sans KR', sans-serif;}
        #footer h3{font-weight: 700;}
        .question-detail-container{
          font-family: 'Nanum Gothic', sans-serif;
          font-weight: 500;
        }   
        .question-detail-img{
             width: 600px;
            height: 400px;
            object-fit: cover;
        }
        .col-xl-2 .question-detail-sidebar{
            position: sticky;
            top: 100px;
            padding-left: 50px;
        }

        .qna-list-item-footer-comments-count {
            margin-left: 2px;
            font-weight: 700;
            color: coral
        }

        .comment-feed-header-count {
            color: coral;
            font-weight: 700;
        }
        .comment-feed-header-count.zero {
            color: #000
        }

        .question-detail-footer{
            color:black;
        }

        .questions-item-footer-tags .keyword-list{
            padding: 0; 
            margin-bottom: -25px;
        }
        
        .keyword-item .questions-item-footer-tags-tag{
            margin-top: 3px; 
            margin-bottom: 10px;
            padding-left: 10px; 
            padding-right: 10px;
        }

        .question-detail-header{
            margin-top: 25px;
        }

        .question-detail-header .h4{
            color: coral; 
            font-weight: 600;
        }

        .questions-writer-image{
            float: left;
        }

        .questions-writer-image-image{
            width: 50px; 
            height: 50px; 
            border-radius: 70%;
        }    

        .questions-writer-nickname{
            color: coral; 
            font-size: 20px; 
            margin-left: 15px;
        }

        .questions-writer-profile{
            color: black; 
            font-size: 16px;
        }
        .sidebar-body{
            margin-top: 15px; 
            margin-bottom: 15px;
            padding-top: 15px;
        }
        .comment-feed-item .p{
            font-size: 13px;
        }
        .comment-feed-item-content-nothing{
            color: coral;
            font-weight: 800;
            text-align: center;
        }
        .sidebar-footer{
            width: 270px;
            text-align: center;
        }
        .comment-feed-item-reply{
            position: relative;
            margin: 10px 0;
        }
        .comment-feed-item-reply img{
            top: -5px;
        }
    </style>


           
</head>

<body id="body">
    
    <header include-html="../commons/header.html"></header>
    <nav id="nav" include-html="../commons/menuComm.html"></nav>

    <div class="row">

    <div class="col-xl-2"></div>
    
    <div class="col-xl-6">
        <div class="question-detail-container" id="question-detail-container">
            <div class="question-detail-header">
                <h4 style="color: coral; font-weight: 600;">질문과답변</h4>
                <h2 class="question-detail-title"></h2>
            </div>
            <br>
            <div class="question-detail-body">

                <div class="question-detail-content">
                    <img src="" class="question-detail-img">
                    <p id="contentText" style="margin-top: 20px; font-size: 15px;"></p>
                </div>

                <br><br><br>

                <div class="question-detail-footer" >
                    <div class="question-detail-body-footer-tag" >
                    <!--    <ul class="questions-item-footer-tags keyword-list" >
                            <li class="keyword-item questions-item-footer-tags-tag" role="button">셀프인테리어</li>
                            <li class="keyword-item questions-item-footer-tags-tag" role="button">자취</li>
                            <li class="keyword-item questions-item-footer-tags-tag" role="button">돈낭비</li>
                            <li class="keyword-item questions-item-footer-tags-tag" role="button">존망</li>
                        </ul>
                    -->    
                    </div>
                    <br>
                    <div class="question-detail-footer-metadata">
                        <time class="questions-item-footer-date" datetime="2021-05-17T19:49:16+09:00"></time>
                        <!-- 
                        <time datetime="2021-05-17T19:49:16+09:00" class="questions-item-footer-date text-gray">
                        방금
                        </time> 
                    -->
                        <span> 조회 
                            <span class="question-detail-footer-metadata-view-count-value"></span>
                        </span>
                        <span style="color: gainsboro">
                            <a class="question-detail-footer-metadata-report-link" href="">신고</a>
                        </span>
                    </div>
                </div>
                
            </div><!-- question-detail-body 끝 -->

            <div class="question-detail-comment-section">
                <div class="comment-feed">
                    <h1 class="comment-feed-header">댓글<!-- --> 
                    <span class="comment-feed-header-count">6</span></h1>
                    <!-- 댓글작성 폼 -->  
                    <form class="comment-feed-form" id="comment-feed-form" method="POST" enctype="multipart/form-data" onsubmit="return false;">

                        <div class="comment-feed-form-user">
                            <img src="" id="_replyinput">
                        </div>
                        <!-- <input type="hidden" name="questionCommentSeq" id="questionCommentSeq">
                        <input type="hidden" name="questionCommentRegDate" id="questionCommentRegDate">
                        <input type="hidden" name="questionCommentRef" id="questionCommentRef">
                        <input type="hidden" name="questionCommentStep" id="questionCommentStep">
                        <input type="hidden" name="questionCommentDepth" id="questionCommentDepth"> -->
                        <input type="hidden" id="userSeq" name="userSeq" >
                        <input type="hidden" id="questionSeq" name="questionSeq" >
                        <input type="hidden" name="qcFileName" value="123">

                        <div class="comment-feed-form-input">
                            <div class="comment-feed-form-content">
                                <div class="comment-content-input">
                                    <input class="comment-content-input-text comment-feed-form-content-text" 
                                    name="qcContent" id="questionCommentContent" style="outline: none;" placeholder="댓글을 남겨 보세요.">
                                </div>
                                <div class="photo-input-wrap comment-feed-form-content-photo">
                                    <ul class="photo-input"></ul>
                                </div>
                            </div>
                            <div class="comment-feed-form-actions">
                                <button class="comment-feed-form-photo" value="사진 업로드" type="button">
                                    <!-- <svg width="24" height="20" viewBox="0 0 24 20" preserveAspectRatio="xMidYMid meet">
                                        <path fill="#292929" fill-rule="nonzero" d="M3.22 20C1.446 20 0 18.547 0 16.765V6.176c0-1.782 1.446-3.235 3.22-3.235h3.118L7.363.377A.586.586 0 0 1 7.903 0h8.195c.24.003.453.152.54.377l1.024 2.564h3.118c1.774 0 3.22 1.453 3.22 3.235v10.589C24 18.547 22.554 20 20.78 20H3.22zm0-1.176h17.56a2.037 2.037 0 0 0 2.05-2.06V6.177c0-1.15-.904-2.058-2.05-2.058h-3.512a.585.585 0 0 1-.54-.368l-1.024-2.574H8.296L7.27 3.75a.585.585 0 0 1-.54.368H3.22a2.037 2.037 0 0 0-2.05 2.058v10.589c0 1.15.904 2.059 2.05 2.059zM12 17.059c-3.064 0-5.561-2.51-5.561-5.588 0-3.08 2.497-5.589 5.561-5.589s5.561 2.51 5.561 5.589c0 3.079-2.497 5.588-5.561 5.588zm0-1.177a4.392 4.392 0 0 0 4.39-4.411A4.392 4.392 0 0 0 12 7.059a4.392 4.392 0 0 0-4.39 4.412A4.392 4.392 0 0 0 12 15.882z"></path>
                                    </svg> -->
                                </button>
                                <button class="comment-feed-form-submit" value="등록" type="button">등록</button>
                            </div>
                        </div>

                    </form>

                        <ul class="comment-feed-list" id="comment-feed-list" style="list-style: none;">
                            <!-- 테스트댓글1 -->
                            <!--
                            <li class="comment-feed-list-item">
                                <div class="comment-feed-item">
                                    <p class="comment-feed-item-content" >
                                        <input type="hidden" value="9909" id="1123" name="1223">
                                        <a href="#userprofile" class="comment-feed-item-content-author-name" >
                                        <img class="comment-feed-item-content-author-image" src="" onerror="this.src='../image/avatar.png'">    
                                        <span>userid</span>
                                        </a>
                                        <span>댓글내용인디용?</span>
                                    </p>
                                    <footer class="comment-feed-item-footer">
                                        <time class="comment-feed-item-footer-time">10분전</time>
                                        <button class="">좋아요</button>
                                         <button class="comment-feed-reply">답글달기</button> 
                                        <button class="">답글달기</button>
                                        <span style="color: gainsboro"><a href="#" >신고</a></span>
                                    </footer>
                                </div>
                            </li>
                            -->
                        </ul>
                      
                    
<!-- 
                    <ul class="list-paginator">
                        <li>
                            <button class="list-paginator-page sm selected" type="button">1</button>
                        </li>
                        <li>
                            <button class="list-paginator-page sm" type="button">2</button>
                        </li>
                        <li>
                            <button class="list-paginator-next" type="button">
                                <svg width="26" height="26" viewBox="0 0 26 26" preserveAspectRatio="xMidYMid meet">
                                    <g fill="none" fill-rule="evenodd" transform="matrix(-1 0 0 1 26 0)">
                                        <rect width="25" height="25" x=".5" y=".5" stroke="#DCDCDC" rx="4"></rect>
                                        <g stroke="#424242" stroke-linecap="square" stroke-width="2">
                                            <path d="M14.75 8.263L10.25 13M10.25 13l4.5 4.737"></path>
                                        </g>
                                    </g>
                                </svg>
                            </button>
                        </li>
                    </ul>
                     -->
                </div>
            </div>

        </div>
    </div>

    <div class="col-xl-2" >
            <div class="question-detail-sidebar" >
                
                <div class="sidebar-header">
                    <div class="sidebar-header-writer">
                        <div class="row">
                            <div class="questions-writer-image" >
                                <img class="questions-writer-image-image" src="" style="width: 50px; height: 50px; border-radius: 70%"
                                onerror="this.src='../image/avatar.png'"> <!--프로필사진, 에러시 프로필사진 -->
                           </div>
                            <div class="questions-writer-nickname"><!--유저닉네임-->
                               <div class="questions-writer-profile"></div><!--유저프로필네임-->
                            </div>
                            
                        </div>
                    </div>
                </div>
           <!-- <div class="sidebar-body" style="margin-top: 15px; margin-bottom: 15px; padding-top: 15px;">
                    <button class="share-button">공유하기</button>
                </div>
                <hr>
            -->
                <div class="sidebar-footer">
                    <h3 style="font-size: 20px; font-weight: 500;">궁금한게 있으신가요?</h3>
                    <button class="q-button">질문하러가기</button>
                </div>
            </div>
        
    </div>

    <div class="col-xl-2"></div>
    
    </div>  

    <footer id="footer" include-html="../commons/footer.html"></footer>

</body>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/bootstrap/js/bootstrap.min.js"></script>
<script src="../../js/includeHTML.js"></script>
<script src="../../js/header.js"></script>
<script src="../../js/slang.js"></script>

<script>
$(document).ready(function(){
    
    let urlParams = location.search.split(/[?&]/).slice(1).map(function(paramPair) {
            return paramPair.split(/=(.+)?/).slice(0, 2);
        }).reduce(function(obj, pairArray) {
            obj[pairArray[0]] = pairArray[1];
            return obj;
        }, {});

    let seq = urlParams.seq;	// html 에서 html 이동할때 값 가져가는 그런 코드

    let sessionId = JSON.parse(sessionStorage.getItem("login"));
    console.log(sessionId);

    
    if(sessionId==null){
        $("#_replyinput").attr("src","http://192.168.0.231:3000/upload/wanza.png");
        }else{
        $("#_replyinput").attr("src","http://192.168.0.231:3000/upload/"+sessionId.profileName);
    }



    //$("#_replyinput").attr("src","http://192.168.0.231:3000/upload/"+sessionId.profileName)
    //글 삭제하기

    //조회수 증가시키기
    questionReadCountUp();
    function questionReadCountUp(){
        $.ajax({
            url:"http://192.168.0.231:3000/questionReadCountUp",
            type:"get",
            data:{questionSeq:seq},
            success:function(){
                console.log("조회수 증가 성공");
            }, error:function(){
                console.log('questionReadCountUp 실패');
            }
        });
    }

    // 작성 시간 나타내기
    function timeForToday(value) {
        const today = new Date();
        const timeValue = new Date(value);
        const betweenTime = Math.floor((today.getTime() - timeValue.getTime()) / 1000 / 60);
        if (betweenTime < 1) return '방금 전';
        if (betweenTime < 60) {
            return `${betweenTime}분 전`;
        }
        const betweenTimeHour = Math.floor(betweenTime / 60);
        if (betweenTimeHour < 24) {
            return `${betweenTimeHour}시간 전`;
        }
        const betweenTimeDay = Math.floor(betweenTime / 60 / 24);
        if (betweenTimeDay < 365) {
            return `${betweenTimeDay}일 전`;
        }
        return `${Math.floor(betweenTimeDay / 365)}년 전`;
    }
    
    //yyyyMMdd 포맷으로 반환
    function getFormatDate(date){
        var year = date.getFullYear();              //yyyy
        var month = (1 + date.getMonth());          //M
        month = month >= 10 ? month : '0' + month;  //month 두자리로 저장
        var day = date.getDate();                   //d
        day = day >= 10 ? day : '0' + day;          //day 두자리로 저장
        return  year + '-' + month + '-' + day;       //'-' 추가하여 yyyy-mm-dd 형태 생성 가능
    }

    // 넘어온 값이 빈값인지 체크합니다. 
    // !value 하면 생기는 논리적 오류를 제거하기 위해 
    // 명시적으로 value == 사용 
    // [], {} 도 빈값으로 처리 
    var isEmpty = function(value){ 
    if( value == "" || value == null || value == undefined || ( value != null && typeof value == "object" && !Object.keys(value).length ) ){
        return true
        } else { 
        return false 
        } 
    }

    
    //질문글의 댓글 수 카운팅해서 가져오기
    var qccount;
    $.ajax({
    url:"http://192.168.0.231:3000/questionCommentCount",
    type:"get",
    data:{questionSeq:seq},
    async : false,
    success:function(data){
        //alert('questionCommentCount 성공');
        qccount = data;
        if(qccount == 0 || qccount == null || qccount=='0' || typeof(qccount) == "undefined"){
            qccount = 0;
        }
        console.log(qccount);
        $('.comment-feed-header-count').text(qccount);
    }, error:function(data){
        alert('questionCommentCount 실패');
    }
    });

    //해당 글에 대한 내용 뿌리기
    $.ajax({
        url:"http://192.168.0.231:3000/questionDetail",
        type:'post',
        data:{questionSeq:seq},
        success:function(list){
            console.log(list)
            var qdate = list.questionRegDate;
            const date2 = new Date(qdate);
            var date3 = getFormatDate(date2);
            if(isEmpty(list.questionFileName) == true){
                $('.question-detail-img').remove();
            } else {

                $('.question-detail-img').attr("src","http://192.168.0.231:3000/upload/"+list.questionFileName);
            }
            
            /*
            <div class="question-detail-content">
                <img src="" class="question-detail-img">
            </div>
            */


            $('.question-detail-title').text(list.questionTitle);
            
            $("#contentText").append(list.questionContent);
            $('.questions-writer-nickname').text(list.nickName);
            //$('.questions-writer-profile').text(list.userName);
            $('#questionSeq').val(list.questionSeq);
            $('.question-detail-footer-metadata-view-count-value').text(list.questionReadcount);
            //$('.questions-item-footer-date').text(qdate);
            $('.questions-item-footer-date').text(date3);
           // $('.question-detail-footer-date').attr("datetime", list.questionRegDate);
            if(isEmpty(list.userName) == true){
                $('.questions-writer-profile').text("반갑습니다.");
            } else {
                $('.questions-writer-profile').text(list.userName);
            }   
        },error:function(list){
            alert('detail ajax 대실패!!');
        }
    });

    //해당 글에 대한 댓글 내용 뿌리기
    $.ajax({
        url:"http://192.168.0.231:3000/questionCommentList",
        type:'post',
        data:{questionSeq:seq},
        success:function(list){
            console.log(list)
            let size = Object.keys(list).length;
            let app = '';
            if(size!=0){
                $.each(list, function(i, val){
                    if(val.qcDel == 0){
                        
                        var pfname = val.profileName;
                        if(pfname == 0 || pfname == null){
                            pfname = '../image/avatar.png';
                        }

                        if(sessionId != undefined && sessionId.userSeq == val.userSeq){
                            var apple = "<button onclick='commentdel(" + val.qcSeq + ")' > 삭제" + "</button>"
                        } else {
                            apple = '';
                        }

                        if(isEmpty(val.qcSeq) == false){//onclick='commentreply(" + val.qcSeq + ")'
                            var ripple = "<button class='cmtreply' type='button'>답글달기" + "</button>"
                        } else {
                            ripple = '';
                        }
                        
                        //if(isEmpty(val.qcStep) == false || isEmpty(val.qcDepth) == false){
                        if(val.qcDepth==1){
                            var reply 
                            =  "<div class='comment-feed-item-reply'>"
                                
                                + "<a href='#' class='comment-feed-item-content-author-name'>"
                                    
                                + "<img class='comment-feed-item-content-author-image' src='http://192.168.0.231:3000/upload/" 
                                    
                                    +pfname
                                + "' >"
                                + "<span class='questioncommentwriter'>" + val.nickName + "</span>"
                                + "</a>"
                                + "<span> "
                                    + val.qcContent
                                + "</span>"
                            + "</div>"
                        } else {
                            reply = '';
                        }
                                                
                        if(val.qcDepth==0){
                            if(i!=0){ app += "</div></li>" }
                            app+= "<li class='comment-feed-list-item'>"
                                    + "<div class='comment-feed-item'>"
                                        + "<div class='comment-feed-item-content'>"
                                            + "<a href='#' class='comment-feed-item-content-author-name'>"
                                                + "<img class='comment-feed-item-content-author-image' src='http://192.168.0.231:3000/upload/" 
                                                +pfname
                                                + "' >"
                                                + "<span class='questioncommentwriter'>" + val.nickName + "</span>"
                                            + "</a>"
                                            + "<span>"
                                            + val.qcContent
                                            + "</span>"
                                        + "</div>"
                                        + "<footer class='comment-feed-item-footer'>"
                                            + "<time class='comment-feed-item-footer-time'>" + timeForToday(val.qcRegDate) + "</time>"    
                                            //+ "<button> 좋아요 </button>"
                                            + ripple //답글달기
                                            + "<span>"
                                                + "<a href='#'>신고</a>"
                                            + "</span>"
                                            + apple //삭제하기
                                            + "<input type='hidden' value='" + val.qcSeq + "' class='hiddenseq'>"
                                            + "<input type='hidden' value='" + val.qcRef + "' class='qcRef'>"
                                            + "<input type='hidden' value='" + val.qcStep + "' class='qcStep'>"
                                            + "<input type='hidden' value='" + val.qcDepth + "' class='qcDepth'>"
                                        + "</footer>";
                        }
                        if(val.qcDepth==1){ //댓글의 덧글 표기
                            app+= reply;
                        }
                    }
                });
                app += "</div></li>";
            }else {
                app = "<li class='comment-feed-list-item'>"
                        + "<div class='comment-feed-item'>"
                            + "<div class='comment-feed-item-content'>"
                                + "<p href='none' class='comment-feed-item-content-nothing'>"
                                    + "표시할 댓글이 없습니다. "
                                    + "댓글을 추가해주세요."
                                + "</p>"
                            + "</div>"
                        + "</div>"
                    + "</li>"
            }
            $("#comment-feed-list").html(app);

        }, error:function(list){
            console.log('CommentList ajax 실패');
        }
    });
    // 댓글 입력란 클릭 시 
    $("#questionCommentContent").on('click',function(){
    if(isEmpty(sessionId)==true){
        location.href="../login/login.html";
        return;
    }else{
        $('#userSeq').val(sessionId.userSeq);
    }
    })




    //질문과답변 댓글 작성하기
    $('.comment-feed-form-submit').on('click', function(list) {    

      if($("#questionCommentContent").val()==""){
          alert("댓글을 입력 해 주세요");
          return;
      }
      
      var form = $('#comment-feed-form').serialize();
      //console.log(form);
        $.ajax({
          url: 'http://192.168.0.231:3000/questionComment',
          type: 'post',
          data : form,
          success:function(list){
            console.log(list);
            rejax();
          }, error:function(list){
            console.log('questionComment ajax실패');
          }
        });
    });
    
    //댓글에 덧글창 띄우기
     $(document).on('click','.comment-feed-item-footer .cmtreply', function(){
        if(sessionId==null){
            alert('로그인 후 이용해주세요')
            return false;
        } 
        var reqseq = $(this).parents('.comment-feed-list-item').find("input[type='hidden']").val();
        //한번 더 실행되었을때, 이미 적용되어있다면 초기화시켜줌.
        
        let uSeq = $(this).parents('.comment-feed-item-footer').find('.hiddenseq').val();
        $(this).parents('.comment-feed-list-item').find('.comment-reply').html('');
            let ripple  
                    = "<form class='comment-reply'>"
                        + "<div class='comment-reply-content-form'>"
                            + "<div class='comment-reply-content-input'>"    
                                + "<input class='comment-reply-input' name='qcContent' id='questionCommentreply' style='outline: none;' placeholder='@" + $('.questioncommentwriter').val() + "' type='text'>"
                            //+ "</div>"
                            //+ "<div>"
                                + "<input type='hidden' name='qcFileName' value='123'>"
                                + "<input type='hidden' name='userSeq' value='" + sessionId.userSeq + "'>"
                                + "<input type='hidden' name='questionSeq' value='" + $('#questionSeq').val() + "'>"
                                + "<input type='hidden' name='qcSeq' value='" + uSeq + "'>"
                                + "<input type='hidden' name='qcRef' value='" + $('.qcRef').val() + "'>"
                                + "<input type='hidden' name='qcStep' value='" + $('.qcStep').val() + "'>"
                                + "<input type='hidden' name='qcDepth' value='" + $('.qcDepth').val() + "'>"
                                + "<button class='comment-reply-form-submit' type='button' id='qcbtn'>등록</button>"    
                            + "</div>"
                        + "</div>"
                    + "</form>"

        $(this).parents('.comment-feed-item').append(ripple);
     });

     // 질문하러가기 클릭
     $(".q-button").click(function(){

        if(isEmpty(sessionId)==true){
            location.href="../login/login.html";
            return;
        }else{
            location.href = "questionWrite.html";
        }
    })


     //댓글에 덧글 작성하기
    $(document).on('click', "#qcbtn", function(list){
        var form = $('.comment-reply').serialize();
        console.log(form);
            $.ajax({
                url: 'http://192.168.0.231:3000/questionCommentAnswer',
                type: 'post',
                data : form,
                success:function(list){
                    console.log(list);
                    rejax();
                }, error:function(){
                    console.log('CommentAnswer ajax실패');
                }
            });
     });
     

     
    
    

}); // $(document).ready(function() 끝

    

    //질문과답변 댓글 삭제하기
    function commentdel(commentseq){
        $.ajax({
            url:"http://192.168.0.231:3000/questionCommentdel",
            type:"get",
            data : {qcSeq:commentseq},
            success:function(){
                alert('questionCommentdel ajax성공');
                rejax();
            }, error:function(){
                alert('questionCommentdel ajax실패');
            }
        });
    }


    //ajax 후 새로고침
    function rejax(){  
        location.reload();
    }


   

</script>

</html>