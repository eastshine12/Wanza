<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>완벽한 자취생활, 완자</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="shortcut icon" href="../../assets/img/wanza-Icon.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../../css/style.css">
</head>

<body>
    <header include-html="../commons/header.html"></header>
    <nav include-html="../commons/menuComm.html"></nav>

    <div class="container" style="height: 600px;width: 1200px;margin-top: 50px;">
        <div class="row">
            <div class="col-md-8">
                <div class="carousel slide" data-ride="carousel" id="carousel-1" style="border-radius: 0px;width: 100%;">
                    <div class="carousel-inner" style="border-radius: 20px;">
                        <div class="carousel-item active"><img class="w-100 d-block" src="../../assets/img/4365436.jpg"
                                alt="Slide Image" style="height: 500px;">
                            <div class="carousel-caption"
                                style="font-family: 'Noto Sans KR', sans-serif;margin-bottom: 340px;margin-left: -190px;">
                                <h1 style="font-size: 36px;margin-bottom: 11px;margin-left: 0px;margin-right: 0px;">
                                    <strong>원룸 오피스텔 셀프인테리어</strong></h1>
                                <p style="font-size: 18px;margin-top: 0px;margin-bottom: 0;margin-right: 148px;">강남 xx오피스텔
                                    장현성(26)씨 사진</p>
                            </div>
                            <div class="carousel-caption"
                                style="font-family: 'Noto Sans KR', sans-serif;text-align: right;padding-left: 0px;padding-right: 0px;margin-left: 0px;width: 568px;">
                                <button class="btn btn-lg" type="button"
                                    style="color: rgb(255,255,255);margin-left: 0px;width: 135px;height: 55px;border-width: 3px;border-color: rgb(244,116,76);">보러가기</button>
                            </div>
                        </div>
                        <div class="carousel-item"><img class="w-100 d-block"
                                src="../../assets/img/KakaoTalk_20210506_154158464.jpg" alt="Slide Image" style="height: 500px;">
                            <div class="carousel-caption"
                                style="font-family: 'Noto Sans KR', sans-serif;margin-bottom: 340px;margin-left: -190px;">
                                <h1 style="font-size: 36px;margin-bottom: 11px;margin-left: 0px;margin-right: 0px;">
                                    <strong>원룸 오피스텔 셀프인테리어</strong></h1>
                                <p style="font-size: 18px;margin-top: 0px;margin-bottom: 0;margin-right: 148px;">강남 xx오피스텔
                                    장현성(26)씨 사진</p>
                            </div>
                            <div class="carousel-caption"
                                style="font-family: 'Noto Sans KR', sans-serif;text-align: right;padding-left: 0px;padding-right: 0px;margin-left: 0px;width: 568px;">
                                <button class="btn btn-lg" type="button"
                                    style="color: rgb(255,255,255);margin-left: 0px;width: 135px;height: 55px;border-width: 3px;border-color: rgb(244,116,76);">보러가기</button>
                            </div>
                        </div>
                        <div class="carousel-item"><img class="w-100 d-block"
                                src="../../assets/img/KakaoTalk_20210506_154158314.jpg" alt="Slide Image" style="height: 500px;">
                            <div class="carousel-caption"
                                style="font-family: 'Noto Sans KR', sans-serif;margin-bottom: 340px;margin-left: -190px;">
                                <h1 style="font-size: 36px;margin-bottom: 11px;margin-left: 0px;margin-right: 0px;">
                                    <strong>원룸 오피스텔 셀프인테리어</strong></h1>
                                <p style="font-size: 18px;margin-top: 0px;margin-bottom: 0;margin-right: 148px;">강남 xx오피스텔
                                    장현성(26)씨 사진</p>
                            </div>
                            <div class="carousel-caption"
                                style="font-family: 'Noto Sans KR', sans-serif;text-align: right;padding-left: 0px;padding-right: 0px;margin-left: 0px;width: 568px;">
                                <button class="btn btn-lg" type="button"
                                    style="color: rgb(255,255,255);margin-left: 0px;width: 135px;height: 55px;border-width: 3px;border-color: rgb(244,116,76);">보러가기</button>
                            </div>
                        </div>
                    </div>
                    <div><a class="carousel-control-prev" href="#carousel-1" role="button" data-slide="prev"
                            style="width: 70px;"><span class="carousel-control-prev-icon"></span><span
                                class="sr-only">Previous</span></a><a class="carousel-control-next" href="#carousel-1"
                            role="button" data-slide="next" style="width: 70px;"><span
                                class="carousel-control-next-icon"></span><span class="sr-only">Next</span></a></div>
                    <ol class="carousel-indicators">
                        <li data-target="#carousel-1" data-slide-to="0" class="active"></li>
                        <li data-target="#carousel-1" data-slide-to="1"></li>
                        <li data-target="#carousel-1" data-slide-to="2"></li>
                    </ol>
                </div>
            </div>
            <div class="col-md-4">
                <div class="carousel slide" data-ride="carousel" id="carousel-2">
                    <div class="carousel-inner" style="border-radius: 20px;">
                        <div class="carousel-item active"><img class="w-100 d-block"
                                src="../../assets/img/978a6658c39f5857b77d5af8f27e13d3.jpg" alt="Slide Image"
                                style="height: 500px;"></div>
                        <div class="carousel-item"><img class="w-100 d-block" src="../../assets/img/222.jpg" alt="Slide Image"
                                style="height: 500px;"></div>
                        <div class="carousel-item"><img class="w-100 d-block" src="../../assets/img/333.jpg" alt="Slide Image"
                                style="height: 500px;"></div>
                    </div>
                    <div><a class="carousel-control-prev" href="#carousel-2" role="button" data-slide="prev"><span
                                class="carousel-control-prev-icon"></span><span class="sr-only">Previous</span></a><a
                            class="carousel-control-next" href="#carousel-2" role="button" data-slide="next"><span
                                class="carousel-control-next-icon"></span><span class="sr-only">Next</span></a></div>
                    <ol class="carousel-indicators">
                        <li data-target="#carousel-2" data-slide-to="0" class="active"></li>
                        <li data-target="#carousel-2" data-slide-to="1"></li>
                        <li data-target="#carousel-2" data-slide-to="2"></li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    <div class="container" style="width: 1200px;height: 340px;">
        <div class="row">
            <div class="col">
                <h1 style="font-size: 30px;margin-bottom: 15px;"><strong>카테고리</strong></h1>
            </div>
        </div>
        <div class="row" style="margin-top: 15px;">
            <div class="col" style="text-align: center;">
                <figure class="figure" style="margin-right: 15px;margin-left: 15px; cursor: pointer;"><img class="img-fluid figure-img"
                        src="../../assets/img/가구.png" width="150px">
                    <figcaption class="figure-caption" style="text-align: center;font-size: 17px;"><strong>가구</strong>
                    </figcaption>
                </figure>
                <figure class="figure" style="margin-right: 15px;margin-left: 15px; cursor: pointer;"><img class="img-fluid figure-img"
                        src="../../assets/img/조명.png" width="150px">
                    <figcaption class="figure-caption" style="text-align: center;font-size: 17px;"><strong>조명</strong>
                    </figcaption>
                </figure>
                <figure class="figure" style="margin-right: 15px;margin-left: 15px; cursor: pointer;"><img class="img-fluid figure-img"
                        src="../../assets/img/데코.png" width="150px">
                    <figcaption class="figure-caption" style="text-align: center;font-size: 17px;"><strong>홈데코</strong>
                    </figcaption>
                </figure>
                <figure class="figure" style="margin-right: 15px;margin-left: 15px; cursor: pointer;"><img class="img-fluid figure-img"
                        src="../../assets/img/패브릭.png" width="150px">
                    <figcaption class="figure-caption" style="text-align: center;font-size: 17px;"><strong>패브릭</strong>
                    </figcaption>
                </figure>
                <figure class="figure" style="margin-right: 15px;margin-left: 15px; cursor: pointer;"><img class="img-fluid figure-img"
                        src="../../assets/img/수납.png" width="150px">
                    <figcaption class="figure-caption" style="text-align: center;font-size: 17px;"><strong>수납/정리</strong>
                    </figcaption>
                </figure>
            </div>
        </div>
    </div>
    <div class="container" style="width: 1200px;">
        <h1 style="font-size: 30px;margin-bottom: 50px;"><strong>오늘의 인기상품</strong></h1>
        <div id="hotProductList" class="row">
        
            <!-- 인기 상품 리스트 생성되는 곳 -->

        </div>
    </div>




    <div class="container" id="hotCard" style="width: 1200px;">
        <h1 style="font-size: 30px;margin-top: 30px; margin-bottom: 15px;"><strong>이번주 인기 인테리어 사진</strong></h1>
        <div style="margin-top: 50px;">
            <div id="hotCardList" class="row">

                <!-- 인기 인테리어 리스트 생성되는 곳 -->

            </div>



        </div>
    </div>
    
    
    




    <footer include-html="../commons/footer.html"></footer>

    <script src="../../assets/js/jquery.min.js"></script>
    <script src="../../assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="../../js/includeHTML.js"></script>
    <script src="../../js/header.js"></script>
    
</body>


<script>

    //로그인한 계정 닉네임 가져오기
    //let sessionId = JSON.parse(sessionStorage.getItem("login"));
    //console.log(sessionId);

    // function fnMove(seq){
    //     var offset = $("#div" + seq).offset();
    //     $('html, body').animate({scrollTop : offset.top}, 400);
    // }
    let page_url = window.location.href;
    let page_id = page_url.substring(page_url.lastIndexOf("l") + 1);
    console.log(page_id)

    if(page_id=='#'){
        let oset = $("#hotCard").offset();
        //oset = oset.top + 1000
        console.log(oset)
        $('html, body').animate({
            scrollTop: oset.top-70
        }, 500);
    }

    $('#navcol-2 .nav_a').click(function(){//인기글 이동  
        if($(this).text()=='인기글'){
            let oset = $("#hotCard").offset();
            //oset = oset.top + 1000
            console.log(oset)
            $('html, body').animate({
                scrollTop: oset.top-70
            }, 500);
            return false;
        }
    });

    // 금액 콤마 삽입 정규식
    function makeComma(str) {
        str = String(str);
        return str.replace(/(\d)(?=(?:\d{3})+(?!\d))/g, '$1,');
    };


    //할인 퍼센테이지 계산
    function discountRate(price, discount) {
        return Math.ceil(100- (discount/price*100));
    };

    // '인기 상품' 리스트
    getProductList();
    function getProductList() {
        $.ajax({
            url: "http://192.168.0.231:3000/getProductList",
            type: "get",
            success: function (list) {
                console.log(list);

                let app = ""
                if (Object.keys(list).length == 0) {	// JSON형식의 길이

                    app += '<div style="width: 320px; margin-right: 50px;">'
                        + '<h3 style="font-size: 15px; margin-top: 10px;"><b>게시글이 없습니다.</b></h3>'
                        + "</div>";

                    $("#hotProductList").append(app);

                } else {

                    $.each(list, function (i, val) {
                        
                        app += '<div style="width: 350px; height: 400px;">'
                            +  '<article article class="project2_wrap" >'
                            +  '<a href="../store/storeDetail.html?seq=' + val.productSeq + '"></a>'
                            +  '<div class="project2_item">'
                            +  '<span></span>'
                            +  '<img src="http://localhost:3000/upload/' + val.productFileName + '" alt="">'
                            +  '</div>'
                            +  '<h3 style="font-family: \'Noto Sans KR\'; font-size: 17px; margin-top: 15px; margin-bottom: -5px; height: 32px;">' + val.productName + '</h3>';

                        if(val.productDiscount != 0) {
                            app += '<span style="font-family: \'Noto Sans KR\';font-size: 15px; color:gray;"><del>'+makeComma(val.productPrice)+'원</del>&nbsp;&nbsp;</span><span style="font-family: \'Noto Sans KR\';font-size: 17px;"><b>' + makeComma(val.productDiscount) + ' 원</b>&nbsp;&nbsp;</span>'
                                + '<span style="font-family: \'Noto Sans KR\';font-size: 18px;color:rgb(244,116,76)"><b>'+discountRate(val.productPrice, val.productDiscount) + '%</b></span>';
                        } else {
                            app += '<span style="font-family: \'Noto Sans KR\';font-size: 17px;"><b>' + makeComma(val.productPrice) + ' 원</b></span>';
                        }

                        app += '<div style="font-family: \'Noto Sans KR\'; font-size: 14px;margin-top: 5px;"><i class="fa fa-star" style="font-size: 17px;color: rgb(244,116,76);margin-left: 2px;"></i> ' + val.productRating + '&ensp;│&ensp;<b>리뷰 </b>' + val.reviewCount + '</div>'
                            +  '</article>'
                            +  '</div >';

                    });
                    $("#hotProductList").append(app);
                }

            },
            error: function () {
                alert('error');
            }
        });
    };


    
    // '인기 인테리어 사진' 리스트
    getCardList();
    function getCardList() {
        $.ajax({
            url: "http://192.168.0.231:3000/getCardList",
            type: "get",
            success: function (list) {

                console.log(list);

                let app = ""
                if (Object.keys(list).length == 0) {	// JSON형식의 길이

                    app += '<div style="width: 320px; margin-right: 50px;">'
                        + '<h3 style="font-size: 15px; margin-top: 10px;"><b>게시글이 없습니다.</b></h3>'
                        + "</div>";

                    $("#hotCardList").append(app);

                } else {

                    $.each(list, function (i, val) {

                        app += '<div style="width: 320px; margin-right: 50px;">'
                            +   '<article article class="project_wrap" >'
                            +    '<a href="./storyDetail.html?seq='+val.cardSeq+'"></a>'
                            +     '<div class="project_item">'
                            +      '<span></span>'
                            +      '<img src="http://localhost:3000/upload/'+val.cardFileName+'" alt="">'
                            +     '</div>'
                            +     '<h3 style="font-family: \'Noto Sans KR\'; font-size: 16px; margin-top: 15px; height: 32px;"><b>'+val.cardTitle+'</b></h3>'
                            +     '<span style="font-family: \'Noto Sans KR\';font-size: 13px;"><b>'+val.nickName+'</b></span>'
                            +    '<div style="font-family: \'Noto Sans KR\'; font-size: 13px;margin-top: 5px;"><i class="fa fa-heart" style="font-size: 13px;color: rgb(244,116,76);margin-left: 2px;"></i> '+val.likeCount+'&ensp;│&ensp;<b>조회</b> '+val.cardReadCount+'</div>'
                            +   '</article>'
                            +  '</div >'

                    });
                    $("#hotCardList").append(app);
                }

            },
            error: function () {
                alert('error');
            }
        });
    };

</script>



</html>